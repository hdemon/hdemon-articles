# Reactでポートフォリオサイト作った

エンジニアとして働き始めて早3年、そういえば自分のサイト持っていなくて、このままだと転職時とかに困るということに気がついたので、最近関心のある技術でポートフォリオサイトを作ることにした。以下技術的な話。

## React + Arda

最近流行りのReact、この規模のサービスなら初めてでも制御しきれるんじゃないかと思ったので採用した。ただルーティングに懸念があって、既存のreact-routerというライブラリがあるんだけど、仕様がデカくて複雑で、もう少しシンプルなものを使いたいという思いがあった。

いくつか検討したけれど、page.jsとmizchi氏のArdaを組み合わせることにした。UIがリッチになっても、WebサイトはなんやかんやでURLやページといった単位から離れられないと思っていて、Ardaはそこらへんを上手くフォローしてくれる。

一方で既存の方法論との衝突もあって、例えばscriptタグを使って動的に展開するはてブボタンとかの埋め込みが面倒くさい。Reactを導入しつつ、既存のDOM操作法とも共存する方法みたいなのを今後は模索したい。

## Babel

CoffeeScriptはちょっと飽きてきたし、TypeScriptを使う程でもない。ということでBabelを使うことにした。使うまで知らなかったんだけど、ReactのJSXもコンパイルしてくれて便利。Babel自体は今のところ、functionとかself = thisとか書かなくなって快適だな程度の感想しかないが、まあそのうち便利さが分かるんだと思う。

## Github API

ここに掲載している記事は、Githubのレポジトリから採ってきている。つまりGithub上で記事を編集すれば、それがサイトに反映される。ただGithub APIにはアクセス回数の制限があるので、中身をキャッシュするようなサーバを書いた。最初はRackアプリとして書いたんだけど、Reactのserver side renderingがやりにくいと予想されたのでnode製に切り替えた。

## Docker

このサイトはDigitalOceanの上にDockerコンテナを敷いて、その中に建てている。
それとImmutable Infrastructureってやつをやってみたかったので、デプロイコマンドを実行すると、既存のコンテナを破棄して新しいコンテナを作り、pullしてWebサーバを立ち上げる仕組みを作った。破棄後に生成するのでダウンタイムは存在するが、シンプルにしたかったので許容している。

Docker、一つ問題があって、一年ぐらい前から触り始めたんだけど、数週〜一ヶ月程度学習を中断する度に既存のノウハウとか全部忘れて学習曲線が美しいのこぎり波になっている。つまりDocker力は論理ではなく知識の面も大きいんだろうなと思う。

## 実験的ミニWebサービス便利

今までこういう趣旨のサイトはミニマムであるべきだ、Jekyll最高！！！みたいに思っていたが、このサイトを作ってからは、局所的にオーバースペックな技術を使った実験用サービスがあるのって便利だなと思うようになった。例えばこの程度のサイトにDockerを使う必要はないが、いざDockerの実験をしたいとなれば、全体の仕様がミニマムであるため、Dockerの実験にコストがかからないというメリットがある。次はReactのserver side renderingやりたい。

